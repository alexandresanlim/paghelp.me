<?xml version="1.0" encoding="UTF-8" ?>
<Grid
    x:Class="PixQrCodeGeneratorOffline.Views.Content.StartPageContents.StartPageNewsView"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:content="clr-namespace:PixQrCodeGeneratorOffline.Views.Content"
    xmlns:controls="clr-namespace:PixQrCodeGeneratorOffline.Controls"
    xmlns:icons="clr-namespace:PixQrCodeGeneratorOffline.Helpers.Icon"
    xmlns:models="clr-namespace:PixQrCodeGeneratorOffline.Models"
    xmlns:vm="clr-namespace:PixQrCodeGeneratorOffline.ViewModels"
    x:DataType="vm:DashboardViewModel">

    <CollectionView
        Margin="8,0,0,0"
        HeightRequest="280"
        IsVisible="{Binding CurrentFeedList, Converter={StaticResource HasDataConverter}}"
        ItemsSource="{Binding CurrentFeedList}"
        SelectionMode="None">

        <CollectionView.ItemsLayout>
            <LinearItemsLayout ItemSpacing="8" Orientation="Horizontal" />
        </CollectionView.ItemsLayout>

        <CollectionView.ItemTemplate>
            <DataTemplate x:DataType="models:Feed">

                <Frame
                    Padding="0"
                    BackgroundColor="{DynamicResource background_page}"
                    BorderColor="{DynamicResource foreground_page}"
                    CornerRadius="8"
                    VerticalOptions="FillAndExpand"
                    WidthRequest="230">

                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding Command.NavigateToWebViewCommand, Mode=OneTime}" />
                    </Frame.GestureRecognizers>

                    <StackLayout Spacing="0">

                        <Image
                            Aspect="AspectFill"
                            HeightRequest="120"
                            Source="{Binding Image}"
                            VerticalOptions="Start" />


                        <Label
                            Margin="8,8,8,0"
                            FontFamily="{DynamicResource FontSemiBold}"
                            FontSize="{DynamicResource FontSizeSmall}"
                            Text="{Binding Source}"
                            TextColor="{DynamicResource textPrimary}" />

                        <Label
                            Margin="8,0"
                            FontSize="{DynamicResource FontSizeMicro}"
                            LineBreakMode="TailTruncation"
                            MaxLines="4"
                            Text="{Binding Title}"
                            TextColor="{DynamicResource primaryDark}"
                            VerticalOptions="FillAndExpand" />

                        <StackLayout
                            Margin="8"
                            Orientation="Horizontal"
                            VerticalOptions="EndAndExpand">
                            <Label
                                FontSize="{DynamicResource FontSizeMicro}"
                                HorizontalOptions="StartAndExpand"
                                Text="{Binding Viewer.PublishDateDisplay}"
                                TextColor="{DynamicResource primaryDark}"
                                VerticalOptions="EndAndExpand" />
                            <StackLayout Padding="15,15,0,0">
                                <StackLayout.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding Command.ShareCommand}" />
                                </StackLayout.GestureRecognizers>
                                <controls:CustomIcon
                                    FontSize="{DynamicResource FontSizeMedium}"
                                    Glyph="{x:Static icons:FontAwesomeSolid.ShareAlt}"
                                    HorizontalOptions="CenterAndExpand"
                                    TextColor="{DynamicResource primaryDark}" />
                            </StackLayout>
                        </StackLayout>
                    </StackLayout>

                </Frame>

            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>


    <content:PanelLoadView IsVisible="{Binding IsBusy}" />
</Grid>